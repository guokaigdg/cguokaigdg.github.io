---
layout: post
title: '使用nwb发布你的第一个npm组件'
date: 2019-12-02 20:00:21 +0800
author: ma_meng
color: rgb(255,210,32)
cover: 'https://img-blog.csdnimg.cn/20191203230246711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d1b2thaWdkZw==,size_16,color_FFFFFF,t_70'
subtitle: ''
tags: npm包
---

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191203230246711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d1b2thaWdkZw==,size_16,color_FFFFFF,t_70)


### nwb 是什么?
> 一个用于npm模块的工具包, 支持
- `React`、`Preact`、`Inferno` & `vanilla JS`应用程序、`React库`和其他`web`

### 1. nwb安装:
- 全局安装nwb, 使用npm或者cnpm
```
npm install -g nwb  //全局安装nwb
```

```
cnpm install -g nwb  //全局安装nwb
```

### 2.创建组件 nwb

```
nwb new react-component yunshang
cd yunshang/
```

- nwb 项目里有一个./demo/src/index.js文件，这个文件可以理解为测试你开发组件的文件

```js
import React, {Component} from 'react'
import {render} from 'react-dom'
import Button from '../../src/index';

class Demo extends Component {
  handleClick =  ()=> {
    console.log("已点击");
  }
  render() {
    return (
      <div>
        <Button 
          onClick = {()=>{this.handleClick()}} 
          disabled = {false}
        >
          登陆
        </Button>
        <Button disabled = {true} >禁用</Button>
        <Button />
      </div>
    )
  }
}
render(<Demo/>, document.querySelector('#demo'))
```

- 还有一个./src/index.js文件，这个是自己开发组件的文件

```js
import React, {Component} from 'react';
import PropTypes from 'prop-types';
import CX from 'classnames';
import './index.css';

class Button extends Component {
  state = {
    active: false,
  }
  render() {
    const { children, onClick, disabled} = this.props;
    console.log(disabled);
    return (
      <span
        className = {CX({
          btn:true,
          "btn-disabled": disabled === true ,
        })}
        onClick = {onClick}
      >
        <span className = 'btn-content'>
          {children}
        </span>
      </span>
    )
  }
}

Button.propTypes = {
  children: PropTypes.string,
  onClick: PropTypes.func,
  disabled: PropTypes.bool,
}
Button.defaultProps = {
  children:"Button",
  onClick: () => {return null},
  disabled : false,
}
export default Button
```

### 3. 🔨构建出可以发布的内容 npm run build 
- 发布之前确认跟上次版本号不一样，不然会版本号重复报错
```
npm run build
```
- build模块-- --copy-files 可将css打包进npm包( 默认是不打包css文件的 )修改package.json中的build

```js
    "scripts": {
        "build": "nwb build-react-component --copy-files",
    },
```

### 4.发布npm包  npm publish
```
npm publish
```

-  https://www.npmjs.com 查看有没有发布成功

### 5.删除npm包

```
npm unpublish yunshang --force
```

### 6.调用npm包
- 在react项目中安装
```
npm i noo-ui   // 或者cnpm inoo-ui
```
- App.js
```js
import React from 'react';
import './App.css';
import Button from 'noo-ui';  //引入刚才上传的npm包
function App() {
  return (
    <div >
         <Button 
          onClick = {()=>{this.handleClick()}} 
          disabled = {false}
        >
          登陆
        </Button>
        <Button disabled = {true} >禁用</Button>
        <Button />
    </div>
  );
}
export default App;
```


![](https://user-gold-cdn.xitu.io/2019/12/5/16ed206b8609db2c?w=690&h=352&f=gif&s=2354559)

